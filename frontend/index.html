<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>
    <style type="text/tailwindcss">
        @theme {
          --color-clifford: #da373d;
        }
    </style>
</head>
<body>
    <div id="chatbot" class="p-4 flex flex-col justify-center items-center bg-zinc-300 h-screen">
        <div class="shadow-lg p-3 w-xl h-66 min-h-170 justify-items-center backdrop-blur-xs bg-stone-500 rounded-xs">
            <h1 class="text-3xl font-bold text-stone-200 mb-5 ">
                TrainBot
            </h1>
            <div id="chat_section" class=" w-5/5 h-8/10">
                <div  class="min-h-9/10 bg-zinc-100 rounded-xs">
                    <ul id="messages" class="list none p-2 flex flex-col overflow-y-auto max-h-110">
                        <li class="break-normal my-2 p-2 bg-stone-300 w-fit shadow-lg max-w-4/5 font-semibold text-stone-700 rounded-md">Hi, how are you ?</li>
                        <li class="break-normal my-2 p-2 bg-stone-300 w-fit self-end max-w-4/5 shadow-lg text-stone-700 font-semibold rounded-md">I am good, how are you ?</li>
                        <li class="break-normal my-2 p-2 bg-stone-300 w-fit max-w-4/5 shadow-lg font-semibold text-stone-700 rounded-md">Lorem ipsum dolor sit amet.</li>
                        <li class="break-normal my-2 p-2 bg-stone-300 w-fit max-w-4/5 self-end shadow-lg font-semibold text-stone-700 rounded-md">Lorem ipsum, dolor sit amet consectetur adipisici</li>

                        


                    </ul>
                </div>
                <hr>
                <div id="input" class="bg-zinc-100 border-t-5 border-t-stone-500 rounded-xs">
                    <input @keyup.enter="startTyping" type="text" v-model="userMsg" name="" id="chatInput" class="w-full outline-none py-5 text-start text-lg font-semibold p-1 caret-stone-800 text-stone-700">
                </div>
                <p id="shit"></p>
            </div>
        </div>
    </div>

<!-- <script type="module">
    import { createApp, ref, onMounted } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
    //   const { createApp, ref } = Vue
    // import { } from 'vue'
    onMounted(() => {
        const ws = new WebSocket(`ws://localhost:8080/ws/api`)
        ws.binaryType = "blob"

        ws.addEventListener("open", event => {
            console.log("Websocket connection opened")
        })

        ws.addEventListener("close", event => {
            console.log("Websocket connection closed")
        })
    })
    createApp({
    setup() {
    const message = ref('TrainBot')
    const userMsg = defineModel()
    
    function startTyping() {
        console.log('yyyyyyy')
        alert('asdasdasdasd')
        
    }
    return {
      message,
      startTyping
    }
}
}).mount('#chatbot')
</script> -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var typewriter = new Typewriter(document.getElementById('shit'), {
  loop: true,
  delay: 75,
});

typewriter
  .pauseFor(1500)
  .typeString('A simple yet powerful native javascript')
  .pauseFor(300)
  .deleteChars(10)
  .pauseFor(1000)
  .start()
    });
</script>
<script>
      const ws = new WebSocket(`ws://localhost:8080/ws/api`)
        ws.binaryType = "blob"

        ws.addEventListener("open", event => {
            console.log("Websocket connection opened")
        })

        ws.addEventListener("close", event => {
            console.log("Websocket connection closed")
        })

        ws.onmessage = (message) => {
            const msg = document.createElement('li')
            msg.classList.add('break-normal my-2 p-2 bg-stone-300 w-fit shadow-lg max-w-4/5 font-semibold text-stone-700 rounded-md')
            if (message.data instanceof Blob) {
                reader = new FileReader()
                reader.onload = () => {
                    msg.innerHTML = reader.result
                    document.getElementById('messages').appendChild(msg)
                }
            } else {
                console.log(message.data)
                msg.innerHTML = message.data
                document.getElementById('messages').appendChild(msg)
            }
        }

        // on pressing enter on input
        const sendMessage = () => {
            const sendMsg = document.getElementById('chatInput').ariaValueMax
            ws.send(sendMessage)
            document.getElementById('chatInput').value = ""
        }
</script>
</body>
</html>